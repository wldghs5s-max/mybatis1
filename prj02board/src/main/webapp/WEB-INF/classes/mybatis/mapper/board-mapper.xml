<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="BoardMapper">

   <!-- 게시글 작성 -->
   <insert id="write">
      INSERT INTO BOARD
      (
          TITLE
          ,CONTENT
      )
      VALUES
      (
          #{title}
          , #{content}
      )
   </insert>
   
   <!-- 게시글 제목 수정 -->
   <update id="editTitle">
      UPDATE BOARD
          SET
              TITLE = #{title}
              , UPDATED_AT = SYSDATE
      WHERE NO = #{no}
      AND DEL_YN = 'N'
   </update>
   
   <!-- 게시글 내용 수정 -->
   <update id="editContent">
      UPDATE BOARD
          SET
              CONTENT = #{content}
              , UPDATED_AT = SYSDATE
      WHERE NO = #{no}
      AND DEL_YN = 'N'
   </update>
   
   <!-- 게시글 삭제 -->
   <update id="deleteBoard">
      UPDATE BOARD
          SET
              DEL_YN = 'Y'
              , UPDATED_AT = SYSDATE
      WHERE NO = #{no}
      AND DEL_YN = 'N'
   </update>
   
   <!-- 게시글 목록조회 (전체) -->
   <select id="selectBoardAll" resultType="BoardVo">
      SELECT *
      FROM BOARD
      WHERE DEL_YN = 'N'
      ORDER BY NO DESC
   </select>
   
   <!-- 게시글 목록조회 (제목) -->
   <select id="selectBoardByTitle" resultType="BoardVo">
      SELECT *
      FROM BOARD
      WHERE DEL_YN = 'N'
      AND TITLE LIKE '%${x}%'
      ORDER BY NO DESC
   </select>
   
   <!-- 게시글 목록조회 (내용) -->
   <select id="selectBoardByContent" resultType="BoardVo">
      SELECT *
      FROM BOARD
      WHERE DEL_YN = 'N'
      AND CONTENT LIKE '%${x}%'
      ORDER BY NO DESC
   </select>
   
   <!-- 게시글 상세조회 (번호) -->
   <select id="selectBoardByNo" resultType="BoardVo">
      SELECT *
      FROM BOARD
      WHERE NO = #{no}
      AND DEL_YN = 'N'
   </select>
   
   <!-- 조회수 증가 -->
   <update id="increaseHit">
      UPDATE BOARD
       SET
           HIT = HIT+1
       WHERE NO = #{no}
   </update>
  
</mapper>











